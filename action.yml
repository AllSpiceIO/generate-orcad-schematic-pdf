name: "Generate PDF from an OrCAD schematic"
description: >
  Generate PDF from an OrCAD schematic
inputs:
  repository:
    description: "The repository in which the .dsn file update was made"
    required: true
  ref:
    description: "The branch in which the .dsn file update was made"
    required: true
  sha:
    description: "The sha of the commit that triggered this action"
    required: true
  allspice_hub_url:
    description: >
      The url of the allspice instance
    required: false
    default: "https://hub.allspice.io/"
  title_block_field:
    description: >
      The name of the field in which to annotate commit details
    required: false
    default: ""
  commit_to_branch:
    description: >
      Option to commit back to the branch in the location of the design file update
    required: false
    default: "false"
  auth_token:
    description: >
      The AllSpice Hub Auth token to use. If not provided, the autogenerated
      token for the run is used.
    required: true
    default: ${{ github.token }}
runs:
  using: "docker"
  image: "Dockerfile"
  args:
    - ${{ inputs.repository }}
    - ${{ inputs.ref }}
    - ${{ inputs.sha }}
    - "--allspice_hub_url"
    - ${{ github.server_url }}
    - "--title_block_field"
    - ${{ inputs.title_block_field }}
    - "--commit_to_branch"
    - ${{ inputs.commit_to_branch }}
  env:
    ALLSPICE_AUTH_TOKEN: ${{ inputs.auth_token }}
